from flask import Flask, jsonify

app = Flask(__name__)

@app.get("/")
def home():
    return (
        "Hello from Flask on {{ ansible_hostname }} via Nginx â†’ Gunicorn!\n"
        "OS: {{ ansible_facts['os_family'] }} | Distro: {{ ansible_distribution }} {{ ansible_distribution_version }}\n"
    )

@app.get("/health")
def health():
    return jsonify(status="ok")

if __name__ == "__main__":
    app.run(host="127.0.0.1", port={{ flask_app_port }}, debug=False)
