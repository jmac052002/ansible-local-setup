---
- name: Local server setup automation
  hosts: all
  become: true
  gather_facts: true

  pre_tasks:
    - name: Show target host
      ansible.builtin.debug:
        msg: "Running on {{ inventory_hostname }} ({{ ansible_facts['os_family'] }} {{ ansible_facts['distribution_version'] }})"

  roles:
    - role: common
    - role: flask_app
    - role: nginx
